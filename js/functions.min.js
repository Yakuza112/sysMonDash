var $jscomp={scope:{},findInternal:function(c,f,d){c instanceof String&&(c=String(c));for(var g=c.length,h=0;h<g;h++){var k=c[h];if(f.call(d,k,h,c))return{i:h,v:k}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,f,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[f]=d.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,f,d,g){if(f){d=$jscomp.global;c=c.split(".");for(g=0;g<c.length-1;g++){var h=c[g];h in d||(d[h]={});d=d[h]}c=c[c.length-1];g=d[c];f=f(g);f!=g&&null!=f&&$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,d){return $jscomp.findInternal(this,c,d).v}},"es6-impl","es3");jQuery.noConflict();(function(c){c.fn.highlight=function(f){var d=c.extend({delay:1E3},f);return this.each(function(){var f=c(this);c(f).css("color",d.fgcolor_on);c(f).css("background-color",d.bgcolor_on)})}})(jQuery);
var smd=function(){var c,f=0,d=!1,g=1E4,h=0,k="/ajax/getData.php",m="",n=!1,p=[],e={setTimeout:function(b){g=1E3*b},getTimeout:function(){return g},setScroll:function(b){h=b},getScroll:function(){return h},setAjaxFile:function(b){k=b},getAjaxFile:function(){return""===m?l()+k:k},setLang:function(b){p.push(b)},getLang:function(b){return p[b]},setRemoteServer:function(b){m=b},getRemoteServer:function(){return m},setAudioEnabled:function(b){n=b},getAudioEnabled:function(){return n}},l=function(){for(var b=
window.location.pathname.split("/"),a=window.location.protocol+"//"+window.location.host,c="",d=1;d<=b.length-2;d++)c+="/"+b[d];return a+c},q=function(){var b=jQuery("#monitor-data");t();var a=e.getRemoteServer()+e.getAjaxFile();jQuery.ajax({url:a,cache:!1,timeout:e.getTimeout(),dataType:"html",success:function(a){b.html(a);e.getScroll()&&(c=jQuery(document).height(),c>window.innerHeight&&setTimeout(function(){u()},e.getTimeout()/2));a=jQuery(".new");f<a.length&&(f=a.length,v())},error:function(a,
c,d){b.html('<div id="nomessages" class="error">'+e.getLang(1)+"<p>"+a.status+" "+a.statusText+"</p></div>")}})},t=function(){var b=new Date,a=("0"+b.getDate()).slice(-2)+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+b.getFullYear(),c=("0"+b.getHours()).slice(-2),d=("0"+b.getMinutes()).slice(-2),b=("0"+b.getSeconds()).slice(-2);jQuery("#hora").find("h1").html(a+"<br>"+c+":"+d+":"+b)},u=function(){jQuery("body").animate({scrollTop:c},e.getTimeout()/2,function(){jQuery("body").scrollTop(0)}).on("mousemove",
function(){jQuery(this).stop(!0)})};reloadPage=function(){window.location.reload(!1)};var w=function(b){jQuery.ajax({url:l()+"/ajax/saveConfig.php",type:"post",dataType:"json",data:b.serialize(),success:function(a){alertify.logPosition("bottom right");0==a.status?(jQuery("#warn-save").hide(),alertify.delay(5E3).closeLogOnClick(!0).success(a.description)):alertify.error(a.description)}})},x=function(){var b=jQuery(".backendLivestatus").length,a=jQuery(".livestatusTemplate").clone();a.find("[name='backend[livestatus][alias]']")[0].name=
"backend[livestatus]["+b+"][alias]]";a.find("[name='backend[livestatus][path]']")[0].name="backend[livestatus]["+b+"][path]]";a.find("[name='backend[livestatus][active]']")[0].name="backend[livestatus]["+b+"][active]]";return a.html()},y=function(){var b=jQuery(".backendCheckMK").length,a=jQuery(".checkmkTemplate").clone();a.find("[name='backend[checkmk][alias]']")[0].name="backend[checkmk]["+b+"][alias]]";a.find("[name='backend[checkmk][path]']")[0].name="backend[checkmk]["+b+"][path]]";a.find("[name='backend[checkmk][active]']")[0].name=
"backend[checkmk]["+b+"][active]]";return a.html()},z=function(){var b=jQuery(".backendStatus").length,a=jQuery(".statusTemplate").clone();a.find("[name='backend[status][alias]']")[0].name="backend[status]["+b+"][alias]]";a.find("[name='backend[status][path]']")[0].name="backend[status]["+b+"][path]]";a.find("[name='backend[status][active]']")[0].name="backend[status]["+b+"][active]]";return a.html()},A=function(){var b=jQuery(".backendZabbix").length,a=jQuery(".zabbixTemplate").clone();a.find("[name='backend[zabbix][alias]']")[0].name=
"backend[zabbix]["+b+"][alias]";a.find("[name='backend[zabbix][url]']")[0].name="backend[zabbix]["+b+"][url]";a.find("[name='backend[zabbix][version]']")[0].name="backend[zabbix]["+b+"][version]";a.find("[name='backend[zabbix][user]']")[0].name="backend[zabbix]["+b+"][user]";a.find("[name='backend[zabbix][pass]']")[0].name="backend[zabbix]["+b+"][pass]";a.find("[name='backend[zabbix][level]']")[0].name="backend[zabbix]["+b+"][level]";a.find("[name='backend[zabbix][active]']")[0].name="backend[zabbix]["+
b+"][active]";return a.html()},B=function(){var b=jQuery(".backendSMD").length,a=jQuery(".SMDTemplate").clone();a.find("[name='backend[smd][alias]']")[0].name="backend[smd]["+b+"][alias]";a.find("[name='backend[smd][url]']")[0].name="backend[smd]["+b+"][url]";a.find("[name='backend[smd][token]']")[0].name="backend[smd]["+b+"][token]";a.find("[name='backend[smd][active]']")[0].name="backend[smd]["+b+"][active]";return a.html()},C=function(){alertify.logPosition("bottom right");alertify.warn(e.getLang(5));
var b=jQuery("#warn-save");"block"!==b.css("display")&&b.show()},v=function(){if(e.getAudioEnabled()){var b=document.getElementById("audio-alarm"),a=e.getTimeout()/1E3;b.duration>=a&&!1===d&&b.addEventListener("timeupdate",function(){d=!0;b.currentTime>=a-2&&(b.pause(),b.currentTime=0)});b.play()}},r=function(b){jQuery.ajax({url:l()+"/ajax/checkConfig.php",type:"post",dataType:"json",data:b,success:function(a){a=void 0===a.status||0!==a.status?e.getLang(3)+"<br>"+e.getLang(2)+" "+a.description||"":
e.getLang(1)+"<br>"+e.getLang(2)+" "+a.description;alertify.alert(a)}})};return{startSMD:function(){jQuery.ajaxSetup({global:!1,timeout:e.getTimeout()/2});q();setInterval(function(){q()},e.getTimeout())},getUpdates:function(){jQuery("#updates").load(l()+"/ajax/getUpdates.php")},setConfigHooks:function(){var b=jQuery("#frmConfig");b.on("submit",function(a){a.preventDefault();w(b)}).find("select").each(function(){var a=jQuery(this);a.val(a.data("selected"))});b.on("change","input",function(a){a=jQuery("#warn-save");
"block"!==a.css("display")&&a.show()});jQuery("#addLivestatusBackend").on("click",function(a){a.preventDefault();a=jQuery("<div/>",{"class":"backendLivestatus backendConfig",html:x()}).hide().appendTo("#backends-config-container").slideDown("slow").offset();window.scroll(0,a.top)});jQuery("#addCheckMKBackend").on("click",function(a){a.preventDefault();a=jQuery("<div/>",{"class":"backendCheckMK backendConfig",html:y()}).hide().appendTo("#backends-config-container").slideDown("slow").offset();window.scroll(0,
a.top)});jQuery("#addStatusBackend").on("click",function(a){a.preventDefault();a=jQuery("<div/>",{"class":"backendStatus backendConfig",html:z()}).hide().appendTo("#backends-config-container").slideDown("slow").offset();window.scroll(0,a.top)});jQuery("#addZabbixBackend").on("click",function(a){a.preventDefault();a=jQuery("<div/>",{"class":"backendZabbix backendConfig",html:A()}).hide().appendTo("#backends-config-container").slideDown("slow").offset();window.scroll(0,a.top)});jQuery("#addSMDBackend").on("click",
function(a){a.preventDefault();a=jQuery("<div/>",{"class":"backendSMD backendConfig",html:B()}).hide().appendTo("#backends-config-container").slideDown("slow").offset();window.scroll(0,a.top)});jQuery("#backends-config-container").on("click",".backendDelete",function(a){a.preventDefault();if(!0===window.confirm(e.getLang(0))){var b=jQuery(this).parent().parent(".backendConfig");b.slideUp("slow",function(){b.remove()});C()}}).on("click",".backendCheckSMD",function(a){a.preventDefault();var b=jQuery(this).parent().parent(".backendConfig");
a=b.find(".backend_smd_url").val();b=b.find(".backend_smd_token").val();""===a?alertify.alert(e.getLang(4)):(a={action:"smdBackend",data:JSON.stringify({url:a,action:10,token:b})},r(a))}).on("click",".backendCheckZabbix",function(a){a.preventDefault();var b=jQuery(this).parent().parent(".backendConfig");a=b.find(".backend_zabbix_version").val();var c=b.find(".backend_zabbix_url").val(),d=b.find(".backend_zabbix_user").val(),b=b.find(".backend_zabbix_pass").val();""===a||""===c?alertify.alert(e.getLang(4)):
(a={action:"zabbixBackend",data:JSON.stringify({url:c,version:a,user:d,pass:b})},r(a))});jQuery(".btn-gen-token, .btn-gen-pass").click(function(a){a="";for(var b=0;32>b;b++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));document.getElementById(this.getAttribute("data-dst")).value=a;jQuery(this).next(".fa-eye").attr("title",a)});jQuery(".fa-eye").click(function(){var a=this.getAttribute("title");""!==a&&alertify.alert(a)});jQuery("#special_config_pass").on("keyup",
function(){jQuery(this).parent().find(".fa-eye").attr("title",this.value)});jQuery("#btnBack").click(function(){location.href=l()});jQuery(".container-state").on("click",function(a){a=document.getElementById(this.getAttribute("data-container"));"true"==a.getAttribute("aria-expanded")?(a.setAttribute("aria-expanded","false"),jQuery(this).removeClass("fa-caret-up").addClass("fa-caret-down"),jQuery(a).slideUp("slow")):(a.setAttribute("aria-expanded","true"),jQuery(this).removeClass("fa-caret-down").addClass("fa-caret-up"),
jQuery(a).slideDown("slow"))})},Config:e}}();
