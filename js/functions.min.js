var $jscomp={scope:{},findInternal:function(c,f,d){c instanceof String&&(c=String(c));for(var h=c.length,k=0;k<h;k++){var l=c[k];if(f.call(d,l,k,c))return{i:k,v:l}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,f,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[f]=d.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,f,d,h){if(f){d=$jscomp.global;c=c.split(".");for(h=0;h<c.length-1;h++){var k=c[h];k in d||(d[k]={});d=d[k]}c=c[c.length-1];h=d[c];f=f(h);f!=h&&null!=f&&$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,d){return $jscomp.findInternal(this,c,d).v}},"es6-impl","es3");$.noConflict();(function(c){c.fn.highlight=function(f){var d=c.extend({delay:1E3},f);return this.each(function(){var f=c(this);c(f).css("color",d.fgcolor_on);c(f).css("background-color",d.bgcolor_on)})}})(jQuery);
var smd=function(c){var f,d=0,h=!1,k=1E4,l=0,n="/ajax/getData.php",p="",q=!1,r=[],e={setTimeout:function(a){k=1E3*a},getTimeout:function(){return k},setScroll:function(a){l=a},getScroll:function(){return l},setAjaxFile:function(a){n=a},getAjaxFile:function(){return""===p?m()+n:n},setLang:function(a){r.push(a)},getLang:function(a){return r[a]},setRemoteServer:function(a){p=a},getRemoteServer:function(){return p},setAudioEnabled:function(a){q=a},getAudioEnabled:function(){return q}},m=function(){for(var a=
window.location.pathname.split("/"),b=window.location.protocol+"//"+window.location.host,c="",d=1;d<=a.length-2;d++)c+="/"+a[d];return b+c},t=function(){var a=c("#monitor-data");v();var b=e.getRemoteServer()+e.getAjaxFile();c.ajax({url:b,cache:!1,timeout:e.getTimeout(),dataType:"html",success:function(b){a.html(b);e.getScroll()&&(f=c(document).height(),f>window.innerHeight&&setTimeout(function(){w()},e.getTimeout()/2));b=c(".new");d<b.length&&(d=b.length,x())},error:function(b,c,d){a.html('<div id="nomessages" class="error">'+
e.getLang(1)+"<p>"+b.status+" "+b.statusText+"</p></div>")}})},v=function(){var a=new Date,b=("0"+a.getDate()).slice(-2)+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+a.getFullYear(),d=("0"+a.getHours()).slice(-2),e=("0"+a.getMinutes()).slice(-2),a=("0"+a.getSeconds()).slice(-2);c("#hora").find("h1").html(b+"<br>"+d+":"+e+":"+a)},w=function(){c("body").animate({scrollTop:f},e.getTimeout()/2,function(){c("body").scrollTop(0)}).on("mousemove",function(){c(this).stop(!0)})},y=function(a){c.ajax({url:m()+
"/ajax/saveConfig.php",type:"post",dataType:"json",data:a.serialize(),success:function(b){alertify.logPosition("bottom right");0==b.status?(c("#warn-save").hide(),alertify.delay(5E3).closeLogOnClick(!0).success(b.description)):alertify.error(b.description)}})},z=function(){alertify.logPosition("bottom right");alertify.warn(e.getLang(5));var a=c("#warn-save");"block"!==a.css("display")&&a.show()},g={add:{livestatus:function(){var a=c("<div/>",{"class":"backendLivestatus backendConfig",html:g.get.livestatus()}).hide().appendTo("#backends-config-container").slideDown("slow");
window.scroll(0,a.offset().top)},status:function(){var a=c("<div/>",{"class":"backendStatus backendConfig",html:g.get.status()}).hide().appendTo("#backends-config-container").slideDown("slow");window.scroll(0,a.offset().top)},checkmk:function(){var a=c("<div/>",{"class":"backendCheckMK backendConfig",html:g.get.checkmk()}).hide().appendTo("#backends-config-container").slideDown("slow");window.scroll(0,a.offset().top)},zabbix:function(){var a=c("<div/>",{"class":"backendZabbix backendConfig",html:g.get.zabbix()}).hide().appendTo("#backends-config-container").slideDown("slow");
window.scroll(0,a.offset().top)},smd:function(){var a=c("<div/>",{"class":"backendSMD backendConfig",html:g.get.smd()}).hide().appendTo("#backends-config-container").slideDown("slow");window.scroll(0,a.offset().top)},dummy:function(){var a=c("<div/>",{"class":"backendDummy backendConfig",html:g.get.dummy()}).hide().appendTo("#backends-config-container").slideDown("slow");window.scroll(0,a.offset().top)}},get:{livestatus:function(){var a=c(".backendLivestatus").length,b=c(".livestatusTemplate").clone();
b.find("[name='backend[livestatus][alias]']")[0].name="backend[livestatus]["+a+"][alias]]";b.find("[name='backend[livestatus][path]']")[0].name="backend[livestatus]["+a+"][path]]";b.find("[name='backend[livestatus][active]']")[0].name="backend[livestatus]["+a+"][active]]";return b.html()},status:function(){var a=c(".backendStatus").length,b=c(".statusTemplate").clone();b.find("[name='backend[status][alias]']")[0].name="backend[status]["+a+"][alias]]";b.find("[name='backend[status][path]']")[0].name=
"backend[status]["+a+"][path]]";b.find("[name='backend[status][active]']")[0].name="backend[status]["+a+"][active]]";return b.html()},checkmk:function(){var a=c(".backendCheckMK").length,b=c(".checkmkTemplate").clone();b.find("[name='backend[checkmk][alias]']")[0].name="backend[checkmk]["+a+"][alias]]";b.find("[name='backend[checkmk][path]']")[0].name="backend[checkmk]["+a+"][path]]";b.find("[name='backend[checkmk][active]']")[0].name="backend[checkmk]["+a+"][active]]";return b.html()},zabbix:function(){var a=
c(".backendZabbix").length,b=c(".zabbixTemplate").clone();b.find("[name='backend[zabbix][alias]']")[0].name="backend[zabbix]["+a+"][alias]";b.find("[name='backend[zabbix][url]']")[0].name="backend[zabbix]["+a+"][url]";b.find("[name='backend[zabbix][version]']")[0].name="backend[zabbix]["+a+"][version]";b.find("[name='backend[zabbix][user]']")[0].name="backend[zabbix]["+a+"][user]";b.find("[name='backend[zabbix][pass]']")[0].name="backend[zabbix]["+a+"][pass]";b.find("[name='backend[zabbix][level]']")[0].name=
"backend[zabbix]["+a+"][level]";b.find("[name='backend[zabbix][active]']")[0].name="backend[zabbix]["+a+"][active]";return b.html()},smd:function(){var a=c(".backendSMD").length,b=c(".SMDTemplate").clone();b.find("[name='backend[smd][alias]']")[0].name="backend[smd]["+a+"][alias]";b.find("[name='backend[smd][url]']")[0].name="backend[smd]["+a+"][url]";b.find("[name='backend[smd][token]']")[0].name="backend[smd]["+a+"][token]";b.find("[name='backend[smd][show_in_api]']")[0].name="backend[smd]["+a+
"][show_in_api]";b.find("[name='backend[smd][active]']")[0].name="backend[smd]["+a+"][active]";return b.html()},dummy:function(){var a=c(".backendDummy").length,b=c(".dummyTemplate").clone();b.find("[name='backend[dummy][alias]']")[0].name="backend[dummy]["+a+"][alias]";b.find("[name='backend[dummy][path]']")[0].name="backend[dummy]["+a+"][path]";b.find("[name='backend[dummy][image]']")[0].name="backend[dummy]["+a+"][image]";b.find("[name='backend[dummy][active]']")[0].name="backend[dummy]["+a+"][active]";
return b.html()}},check:{zabbix:function(a){var b=a.parent().parent(".backendConfig");a=b.find(".backend_zabbix_version").val();var c=b.find(".backend_zabbix_url").val(),d=b.find(".backend_zabbix_user").val(),b=b.find(".backend_zabbix_pass").val();""===a||""===c?alertify.alert(e.getLang(4)):(a={action:"zabbixBackend",data:JSON.stringify({url:c,version:a,user:d,pass:b})},u(a))},smd:function(a){var b=a.parent().parent(".backendConfig");a=b.find(".backend_smd_url").val();b=b.find(".backend_smd_token").val();
""===a?alertify.alert(e.getLang(4)):(a={action:"smdBackend",data:JSON.stringify({url:a,action:10,token:b})},u(a))}}},x=function(){if(e.getAudioEnabled()){var a=document.getElementById("audio-alarm"),b=e.getTimeout()/1E3;a.duration>=b&&!1===h&&a.addEventListener("timeupdate",function(){h=!0;a.currentTime>=b-2&&(a.pause(),a.currentTime=0)});a.play()}},u=function(a){c.ajax({url:m()+"/ajax/checkConfig.php",type:"post",dataType:"json",data:a,success:function(b){b=void 0===b.status||0!==b.status?e.getLang(3)+
"<br>"+e.getLang(2)+" "+b.description||"":e.getLang(1)+"<br>"+e.getLang(2)+" "+b.description;alertify.alert(b)}})};return{startSMD:function(){c.ajaxSetup({global:!1,timeout:e.getTimeout()/2});t();setInterval(function(){t()},e.getTimeout())},getUpdates:function(){c("#updates").load(m()+"/ajax/getUpdates.php")},setConfigHooks:function(){var a=c("#frmConfig");a.on("submit",function(b){b.preventDefault();y(a)}).find("select").each(function(){var b=c(this);b.val(b.data("selected"))});a.on("change","input",
function(b){b=c("#warn-save");"block"!==b.css("display")&&b.show()});c(".add-backend").on("click",function(b){b.preventDefault();switch(c(this).data("type")){case "status":g.add.status();break;case "livestatus":g.add.livestatus();break;case "checkmk":g.add.checkmk();break;case "zabbix":g.add.zabbix();break;case "smd":g.add.smd();break;case "dummy":g.add.dummy()}});c("#backends-config-container").on("click",".backendDelete",function(b){b.preventDefault();if(!0===window.confirm(e.getLang(0))){var a=
c(this).parent().parent(".backendConfig");a.slideUp("slow",function(){a.remove()});z()}}).on("click",".backendCheckSMD",function(b){b.preventDefault();g.check.smd(c(this))}).on("click",".backendCheckZabbix",function(b){b.preventDefault();g.check.zabbix(c(this))});c(".btn-gen-token, .btn-gen-pass").click(function(b){b="";for(var a=0;32>a;a++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));document.getElementById(this.getAttribute("data-dst")).value=
b;c(this).next(".fa-eye").attr("title",b)});c(".fa-eye").click(function(){var a=this.getAttribute("title");""!==a&&alertify.alert(a)});c("#special_config_pass").on("keyup",function(){c(this).parent().find(".fa-eye").attr("title",this.value)});c("#btnBack").click(function(){location.href=m()});c(".container-state").on("click",function(a){a=document.getElementById(this.getAttribute("data-container"));"true"==a.getAttribute("aria-expanded")?(a.setAttribute("aria-expanded","false"),c(this).removeClass("fa-caret-up").addClass("fa-caret-down"),
c(a).slideUp("slow")):(a.setAttribute("aria-expanded","true"),c(this).removeClass("fa-caret-down").addClass("fa-caret-up"),c(a).slideDown("slow"))})},Config:e}}(jQuery);
